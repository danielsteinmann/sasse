{% extends "base_bewertungen.html" %}
{% load sasse %}

{% block content %}
<form id="filterform" name="filterform" action="" method="GET">
{% for p in disziplin.posten_set.all %}
{% ifequal p.id posten.id %}<b>{{ p.name }}</b>
{% else %}<a href="{% url postenblatt wettkampf.jahr, wettkampf.name, disziplin.name, p.name %}?{{ query }}">{{ p.name }}</a>
{% endifequal %}{% if not forloop.last %}|{% endif %}
{% endfor %}
{% if filterform.non_field_errors %}
{{ filterform.non_field_errors }}
{% endif %}
| {{ filterform.startnummern.errors }}
{{ filterform.startnummern }}
<input type="submit" value="Startnummern auswählen">
</form>
<p>
<b>Posten {{ posten.name }}: {{ posten.postenart.name }}</b>
<table class="list">
    <tr>
        <th>Startnr:</th>
        {% for t in startliste.teilnehmer_forms %}
        <th width="30">{{ t.startnummer }}</th>
        {% endfor %}
    </tr>
    {% for set in formset %}
    <tr>
        <th>{{ set.bewertungsart.name }}:</th>
        {% for form in set.forms %}
        <td {% if not form.initial.id %}bgcolor="LightGreen"{% endif %}>
          {{ form.initial.wert|bewertung:form.bewertungsart.einheit }}
        </td>
        {% endfor %}
    </tr>
    {% endfor %}
</table>
<p>
<a href="{% url postenblatt_update wettkampf.jahr, wettkampf.name, disziplin.name, posten.name %}?{{ query }}">Ändern</a>
</form>
<script type="text/javascript">
  var first_field = document.getElementById('id_startnummern');
  first_field.focus();
  first_field.select();
</script>
{% endblock %}
